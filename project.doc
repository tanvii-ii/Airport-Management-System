{\rtf1\ansi\ansicpg1252\deff0\deflang16393{\fonttbl{\f0\fnil\fcharset0 Calibri;}}
{\*\generator Msftedit 5.41.21.2510;}\viewkind4\uc1\pard\sa200\sl276\slmult1\lang9\f0\fs32 Database Schema\fs22\par
mysql> create table airplane(air_id int primary key auto_increment, air_name varchar(35) not null, origin varchar(20) not null, destination varchar(20) not null, Departure time not null, Arrival time not null, type varchar(30), cost int, MaxSeats int, SeatsFilled int);\par
Query OK, 0 rows affected (0.44 sec)\par
mysql> show columns from airplane;\par
\pard\sl240\slmult1 +-------------+-------------+------+-----+---------+----------------+\par
| Field       | Type        | Null | Key | Default | Extra          |\par
+-------------+-------------+------+-----+---------+----------------+\par
| air_id      | int(11)     | NO   | PRI | NULL    | auto_increment |\par
| air_name    | varchar(35) | NO   |     | NULL    |                |\par
| origin      | varchar(20) | NO   |     | NULL    |                |\par
| destination | varchar(20) | NO   |     | NULL    |                |\par
| Departure   | time        | NO   |     | NULL    |                |\par
| Arrival     | time        | NO   |     | NULL    |                |\par
| type        | varchar(30) | YES  |     | NULL    |                |\par
| cost        | int(11)     | YES  |     | NULL    |                |\par
| MaxSeats    | int(11)     | YES  |     | NULL    |                |\par
| SeatsFilled | int(11)     | YES  |     | NULL    |                |\par
+-------------+-------------+------+-----+---------+----------------+\par
10 rows in set (0.00 sec)\par
\pard\sl276\slmult1\par
mysql> create table passengers(p_id int primary key auto_increment, p_name varchar(50) not null, dob date, gender varchar(20), air_id int, phone bigint, SeatNo varchar(10), foreign key(air_id) references airplane(air_id));\par
Query OK, 0 rows affected (0.43 sec)\par
\par
mysql> show columns from passengers;\par
+--------+-------------+------+-----+---------+----------------+\par
| Field  | Type        | Null | Key | Default | Extra          |\par
+--------+-------------+------+-----+---------+----------------+\par
| p_id   | int(11)     | NO   | PRI | NULL    | auto_increment |\par
| p_name | varchar(50) | NO   |     | NULL    |                |\par
| dob    | date        | YES  |     | NULL    |                |\par
| gender | varchar(20) | YES  |     | NULL    |                |\par
| air_id | int(11)     | YES  | MUL | NULL    |                |\par
| phone  | bigint(20)  | YES  |     | NULL    |                |\par
| SeatNo | varchar(10) | YES  |     | NULL    |                |\par
+--------+-------------+------+-----+---------+----------------+\par
7 rows in set (0.00 sec)\par
\par
mysql> create table employee(e_id int primary key auto_increment, e_name varchar(50), air_id int, e_dob date, e_gender varchar(20), post varchar(30), salary int, foreign key(air_id) references airplane(air_id));\par
Query OK, 0 rows affected (0.20 sec)\par
\par
mysql> show columns from employee;\par
+----------+-------------+------+-----+---------+----------------+\par
| Field    | Type        | Null | Key | Default | Extra          |\par
+----------+-------------+------+-----+---------+----------------+\par
| e_id     | int(11)     | NO   | PRI | NULL    | auto_increment |\par
| e_name   | varchar(50) | YES  |     | NULL    |                |\par
| air_id   | int(11)     | YES  | MUL | NULL    |                |\par
| e_dob    | date        | YES  |     | NULL    |                |\par
| e_gender | varchar(20) | YES  |     | NULL    |                |\par
| post     | varchar(30) | YES  |     | NULL    |                |\par
| salary   | int(11)     | YES  |     | NULL    |                |\par
+----------+-------------+------+-----+---------+----------------+\par
7 rows in set (0.00 sec)\par
\par
mysql> create table codes(c_id int primary key auto_increment, City varchar(30),\par
 code varchar(5));\par
Query OK, 0 rows affected (0.44 sec)\par
\par
mysql> show columns from codes;\par
+-------+-------------+------+-----+---------+----------------+\par
| Field | Type        | Null | Key | Default | Extra          |\par
+-------+-------------+------+-----+---------+----------------+\par
| c_id  | int(11)     | NO   | PRI | NULL    | auto_increment |\par
| City  | varchar(30) | YES  |     | NULL    |                |\par
| code  | varchar(5)  | YES  |     | NULL    |                |\par
+-------+-------------+------+-----+---------+----------------+\par
3 rows in set (0.30 sec)\par
\par
\par
\fs32 Triggers:\par
\fs22\par
mysql> Delimiter //\par
mysql>  Create Trigger trig_before_insert\par
    ->      Before insert on passengers\par
    ->      for each row\par
    ->      begin\par
    ->      declare max int;\par
    ->      declare filled int;\par
    ->      set max= (select MaxSeats from airplane where air_id= new.air_id);\par
    ->      set filled= (select SeatsFilled from airplane where air_id= new.air_id);\par
    ->      if max= filled then\par
    ->      signal SQLSTATE '45000'\par
    ->      SET MESSAGE_TEXT ="No Seats Left!";\par
    ->      End if;\par
    ->      End //\par
Query OK, 0 rows affected (0.03 sec)\par
\par
mysql>  create trigger trig_after_insert\par
    ->          after insert on passengers\par
    ->           for each row\par
    ->           begin\par
    ->           update airplane set SeatsFilled= SeatsFilled+1 where air_id= new.air_id;\par
    ->           end//\par
Query OK, 0 rows affected (0.30 sec)\par
\par
mysql> create trigger trig_after_delete\par
    -> after delete on passengers\par
    -> for each row\par
    -> begin\par
    -> update airplane set SeatsFilled= SeatsFilled-1 where air_id= old.air_id;\par
    -> end//\par
Query OK, 0 rows affected (0.20 sec)\par
\par
mysql> delimiter ;\par
\par
\fs32 Tables:\par
\fs22\par
mysql> select * from airplane;\par
+--------+-----------+-----------------+-------------+-----------+----------+----------+-------+----------+-------------+\par
| air_id | air_name  | origin          | destination | Departure | Arrival  | type     | cost  | MaxSeats | SeatsFilled |\par
+--------+-----------+-----------------+-------------+-----------+----------+----------+-------+----------+-------------+\par
|    101 | Air India | PNQ (Pune)      | DEL (Delhi) | 09:20:00  | 11:00:00 | Economy  |  6450 |       10 |           1 |\par
|    102 | Air India | BOM (Mumbai)    | DEL (Delhi) | 09:20:00  | 11:00:00 | Business | 10254 |        5 |           1 |\par
|    103 | Vistara   | BOM (IXL)       | IXL (Leh)   | 03:40:00  | 07:15:00 | Economy  |  7890 |       10 |           1 |\par
|    104 | Spicejet  | BLR (Bangalore) | GOI (Goa)   | 13:55:00  | 14:30:00 | Economy  |  4370 |       15 |           1 |\par
|    105 | Spicejet  | BLR (Bangalore) | GOI (Goa)   | 13:55:00  | 14:30:00 | Business | 11576 |        4 |           1 |\par
+--------+-----------+-----------------+-------------+-----------+----------+----------+-------+----------+-------------+\par
5 rows in set (0.00 sec)\par
\par
mysql> select * from passengers;\par
+------+-----------------+------------+--------+--------+----------+--------+\par
| p_id | p_name          | dob        | gender | air_id | phone    | SeatNo |\par
+------+-----------------+------------+--------+--------+----------+--------+\par
|  201 | Sampada Dhingra | 1997-08-12 | Female |    101 | 87874322 | 9A     |\par
|  203 | Tanvi Kulkarni  | 1997-04-04 | Female |    103 | 87874836 | 12C    |\par
|  204 | Swara Lawande   | 1996-06-09 | Female |    104 | 89874836 | 3B     |\par
|  205 | Ahaan Pandey    | 1994-11-23 | Male   |    102 |  8982036 | 1B     |\par
|  206 | Varad Lahoti    | 1995-07-16 | Male   |    105 | 89712036 | 2A     |\par
+------+-----------------+------------+--------+--------+----------+--------+\par
5 rows in set (0.00 sec)\par
\par
mysql> select * from employee;\par
+------+----------------+--------+------------+----------+------------------+--------+\par
| e_id | e_name         | air_id | e_dob      | e_gender | post             | salary |\par
+------+----------------+--------+------------+----------+------------------+--------+\par
|  301 | Riya Lekhwani  |    101 | 1985-06-19 | Female   | Pilot            | 300000 |\par
|  302 | Suresh Bhat    |    103 | 1986-12-04 | Male     | Pilot            | 250000 |\par
|  303 | Roshni Chopra  |    104 | 1980-06-23 | Female   | Pilot            | 100000 |\par
|  304 | Riya Lekhwani  |    102 | 1985-06-19 | Female   | Pilot            | 300000 |\par
|  305 | Roshni Chopra  |    105 | 1980-06-23 | Female   | Pilot            | 100000 |\par
|  306 | Atul Chordiya  |    101 | 1990-07-15 | Male     | Flight Attendant |  40000 |\par
|  307 | Neha Deshpande |    101 | 1994-02-28 | Female   | Flight Attendant |  35000 |\par
|  308 | Niraj Kini     |    103 | 1995-05-01 | Male     | Flight Attendant |  35000 |\par
|  309 | Abha Kapoor    |    104 | 1989-03-12 | Female   | Flight Attendant |  25000 |\par
+------+----------------+--------+------------+----------+------------------+--------+\par
9 rows in set (0.00 sec)\par
\par
mysql> select * from codes;\par
+------+-----------+------+\par
| c_id | City      | code |\par
+------+-----------+------+\par
|  501 | Ahmedabad | AMD  |\par
|  502 | Lucknow   | LKO  |\par
|  503 | Mumbai    | BOM  |\par
|  504 | Pune      | PNQ  |\par
|  505 | Delhi     | DEL  |\par
|  506 | Goa       | GOI  |\par
|  507 | Leh       | IXL  |\par
|  508 | Shillong  | SHL  |\par
|  509 | Bangalore | BLR  |\par
|  510 | Guwahati  | GAU  |\par
|  511 | Kochi     | COK  |\par
|  512 | Udaipur   | UDR  |\par
|  513 | Hyderabad | HYD  |\par
|  514 | Agra      | AGR  |\par
|  515 | Jaipur    | JAI  |\par
|  516 | Shimla    | SLV  |\par
|  517 | Nagpur    | NAG  |\par
+------+-----------+------+\par
17 rows in set (0.18 sec)\par
\pard\sa200\sl276\slmult1\par
}
 